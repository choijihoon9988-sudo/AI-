rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // 'prompts' 컬렉션의 모든 문서({promptId})에 대해
    match /prompts/{promptId} {
      // 요청을 보낸 사용자가 로그인했고(request.auth != null),
      // 그 사용자의 UID가 접근하려는 문서의 userId 필드 값과 같을 때만
      // 읽기, 쓰기, 수정, 삭제를 허용한다.
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
    }
  }
}
